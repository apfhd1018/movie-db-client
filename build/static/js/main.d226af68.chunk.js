(this["webpackJsonpmovie-db"]=this["webpackJsonpmovie-db"]||[]).push([[0],{130:function(e,t,a){e.exports=a(252)},135:function(e,t,a){},136:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),o=a.n(s),l=(a(135),a(26)),c=a.n(l),i=a(43),u=a(53),m=a(24),p=(a(136),a(259)),d=function(e){return r.a.createElement("div",{className:"searchbox-wrap"},r.a.createElement("div",{className:"searchbox-in"},r.a.createElement("input",{type:"text",placeholder:"\uc601\ud654\uc81c\ubaa9\uc740 \uc601\uc5b4\ub85c \uac80\uc0c9\ud558\uc138\uc694",className:"searchbox",onChange:e.handleInput,onKeyPress:e.search,ref:e.inputRef}),r.a.createElement("button",{onClick:e.handleButton},r.a.createElement(p.a,{className:"search-icon"}),"Search")))},v=a(7),g=a.n(v),h=a(253),f=a(254),E=a(260),b=function(e){var t=e.result,a=e.openPopup,n=e.setToggle,s=e.setClick,o=(e.isClick,e.movieId),l={userFrom:sessionStorage.getItem("userId"),movieId:o},c=sessionStorage.getItem("accessToken"),i=function(){g.a.post("http://localhost:5000/api/private/getLike",l,{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){e.data.success?(s(e.data.likeData),console.log("\ud558\ud2b8 ",e.data.success)):console.log("\ud558\ud2b8\ub370\uc774\ud130 \ubabb\ubd88\ub7ec\uc634")}))};return r.a.createElement(h.a,{lg:8,md:12,xs:12,className:"result"},r.a.createElement("div",{onClick:function(){a(t.imdbID),n(!0),i()}},r.a.createElement("img",{src:t.Poster,alt:"poster"})),r.a.createElement("div",{className:"result-text"},r.a.createElement("h3",null,t.Title)))};var k=function(e){return 1===e.results[0]?r.a.createElement("div",{className:"no-result"},r.a.createElement(E.a,{spin:!0})," ",r.a.createElement("br",null),"No results were found for your search.",r.a.createElement("br",null),"Please ",r.a.createElement("span",{style:{color:"#ff9800"}},"check the words.")):r.a.createElement("div",{className:"resultlist-container"},r.a.createElement("div",{className:"resultlist"},r.a.createElement(f.a,null,e.results.map((function(t){return r.a.createElement(b,{result:t,key:t.imdbID,openPopup:e.openPopup,toggle:e.toggle,setToggle:e.setToggle,setClick:e.setClick,isClick:e.isClick,movieId:t.imdbID})})))))},I=a(80),y=a(127),C=function(e){e.userFrom;var t=e.movieId,a=e.movieTitle,s=e.moviePoster,o=e.setClick,l=e.isClick,c=Object(n.useState)(!0),i=Object(m.a)(c,2),u=i[0],p=i[1],d={userFrom:sessionStorage.getItem("userId"),movieId:t,movieTitle:a,moviePoster:s},v=sessionStorage.getItem("accessToken");g.a.post("http://localhost:5000/api/private/favorited",d,{headers:{Authorization:"Bearer ".concat(v)}}).then((function(e){e.data.success?p(e.data.favorited):alert("Favorite \uc815\ubcf4 \uac00\uc838\uc624\uc9c0 \ubabb\ud568!")}));return r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement(y.a,{isClick:l,onClick:function(){u?g.a.post("http://localhost:5000/api/private/removeFromFavorite",d,{headers:{Authorization:"Bearer ".concat(v)}}).then((function(e){e.data.success?(o(!u),p(!u)):console.log("favorite\ucf5c\ub809\uc158\uc5d0\uc11c \uc81c\uac70\ud558\uc9c0 \ubabb\ud568")})):g.a.post("http://localhost:5000/api/private/addToFavorite",d,{headers:{Authorization:"Bearer ".concat(v)}}).then((function(e){e.data.success?(o(!u),p(!u)):console.log("\ucd94\uac00\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4")}))}}),r.a.createElement("div",{className:"add"},"Add to Favorite!")))};var w=function(e){var t=e.results,a=e.closePopup,n=e.setClick,s=e.isClick;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"btn-position"},r.a.createElement("h2",null,t.Title," (",t.Year,")"),r.a.createElement("div",{style:{display:"flex",position:"relative"}},r.a.createElement("div",null,r.a.createElement("p",{className:"rating"},"Rating : ",t.imdbRating)),r.a.createElement(C,{userFrom:sessionStorage.getItem("userId"),movieId:t.imdbID,movieTitle:t.Title,moviePoster:t.Poster,setClick:n,isClick:s})),r.a.createElement("div",{className:"poster"},r.a.createElement("img",{src:t.Poster,alt:""}),r.a.createElement("div",{className:"poster-right"},r.a.createElement("p",null,r.a.createElement("span",null,"PLOT")," ",r.a.createElement("br",null),t.Plot),r.a.createElement("p",null,r.a.createElement("span",null,"DIRECTOR")," ",r.a.createElement("br",null),t.Director),r.a.createElement("p",null,r.a.createElement("span",null,"ACTOR")," ",r.a.createElement("br",null),t.Actors))),r.a.createElement("div",{className:"close-popup"},r.a.createElement(I.a,{type:"primary",onClick:a},"Close"))))},O=a(256),x=a(257),N=a(255),S=a(261),T=a(262),j={labelCol:{span:24},wrapperCol:{span:24}},P={wrapperCol:{span:24}},F=function(e){e.login;var t=e.setLogin,a=e.openRegister,n=e.setChange,s=function(){var e=Object(i.a)(c.a.mark((function e(a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("http://localhost:5000/api/users/login",a);case 3:r=e.sent,sessionStorage.setItem("accessToken",r.data.accessToken),sessionStorage.setItem("refreshToken",r.data.refreshToken),sessionStorage.setItem("userId",r.data.userId),console.log("\ub85c\uadf8\uc778 \ubc0f \uc694\uccad \uc131\uacf5"),t(!1),n(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Login failed"),console.log("\ub85c\uadf8\uc778\uc5d0\ub7ec : ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-box"},r.a.createElement("h2",null,"Enjoy Our Movie Database!"),r.a.createElement(O.a,Object.assign({name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:s},j),r.a.createElement(O.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(x.a,{prefix:r.a.createElement(S.a,{className:"site-form-item-icon"}),placeholder:"Username"})),r.a.createElement(O.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],style:{marginBottom:"30px"}},r.a.createElement(x.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(O.a.Item,P,r.a.createElement(I.a,{type:"primary",htmlType:"submit",style:{marginRight:"5px"}},"Log in"),r.a.createElement(I.a,{type:"primary",onClick:function(){t("none")},style:{marginLeft:"5px"}},"Close"))),r.a.createElement(N.a,{style:{color:"#767676"}},"New to MovieDB?"),r.a.createElement(I.a,{style:{width:"80%"},onClick:a},"Create your MovieDB account")))},B=a(263),R={labelCol:{span:5},wrapperCol:{span:19}},A={wrapperCol:{span:24}},D=function(e){var t=e.setRegister,a=e.setLogin,n=function(){var e=Object(i.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("http://localhost:5000/api/users/add",n);case 3:alert("You have successfully registered as a member. Please log in."),t(!1),a(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("Is your ID or password more than 3 characters long?\nOr your ID already exists.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-box",style:{position:"relative"}},r.a.createElement("h2",null,"Create account"),r.a.createElement(O.a,Object.assign({},R,{name:"basic",onFinish:n}),r.a.createElement(O.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!(At least 3 string.)"}]},r.a.createElement(x.a,null)),r.a.createElement(O.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!(At least 3 string.)"}]},r.a.createElement(x.a.Password,null)),r.a.createElement(O.a.Item,A,r.a.createElement(I.a,{type:"primary",htmlType:"submit",style:{marginRight:"5px"}},"Submit"),r.a.createElement(I.a,{type:"primary",onClick:function(){t(!1)},style:{marginLeft:"5px"}},"Close"))),r.a.createElement(B.a,{className:"backToLogin",onClick:function(){t(!1),a(!0)}})))},L=a(264),z=a(258),M=function(){var e={userFrom:sessionStorage.getItem("userId")},t=Object(n.useState)([]),a=Object(m.a)(t,2),s=a[0],o=a[1],l=sessionStorage.getItem("accessToken");Object(n.useEffect)((function(){c()}),[]);var c=function(){g.a.post("http://localhost:5000/api/private/getFavoriteMovie",e,{headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){e.data.success?o(e.data.favorites):console.log("Failed to get favorited videos")}))};return r.a.createElement("div",{className:"favorite"},s.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("div",{className:"favorite-box"},r.a.createElement("img",{src:e.moviePoster,alt:""}),e.movieTitle,r.a.createElement("div",{className:"favorite-icon"},r.a.createElement(z.a,{title:"Delete"},r.a.createElement(I.a,{shape:"circle",icon:r.a.createElement(L.a,{onClick:function(){return function(e){var t={movieId:e,userFrom:sessionStorage.getItem("userId")};g.a.post("http://localhost:5000/api/private/removeFromFavorite",t,{headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){e.data.success?(c(),console.log("\uc0ad\uc81c\uc131\uacf5")):console.log("favorite\ucf5c\ub809\uc158\uc5d0\uc11c \uc81c\uac70\ud558\uc9c0 \ubabb\ud568")}))}(e.movieId)}}),danger:!0})))))})))};var q=function(){var e=Object(n.useState)({title:"",results:[],selected:{}}),t=Object(m.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(!1),l=Object(m.a)(o,2),p=l[0],v=l[1],h=Object(n.useState)(!1),f=Object(m.a)(h,2),E=f[0],b=f[1],I=Object(n.useState)(!1),y=Object(m.a)(I,2),C=y[0],O=y[1],x=Object(n.useState)(!1),N=Object(m.a)(x,2),S=N[0],T=N[1],j=Object(n.useState)(!0),P=Object(m.a)(j,2),B=P[0],R=P[1],A=Object(n.useState)(!1),L=Object(m.a)(A,2),z=L[0],q=L[1],U=Object(n.useRef)(),J="https://www.omdbapi.com/?apikey=ec6e8a00",W=function(e){g.a.get(J+"&s="+a.title).then((function(e){var t=e.data.Search||[1];s((function(e){return Object(u.a)({},e,{results:t})}))}))},Y=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=sessionStorage.getItem("accessToken"),e.next=4,g.a.get("http://localhost:5000/api/private",{headers:{Authorization:"Bearer ".concat(t)}});case 4:a=e.sent,console.log("favorite \ubaa8\ub2ec : ",a),T(!S),e.next=20;break;case 9:return e.prev=9,e.t0=e.catch(0),alert("Please Log in!"),n=sessionStorage.getItem("refreshToken"),e.next=15,g.a.post("http://localhost:5000/api/users/token",{token:n});case 15:return r=e.sent,s=r.data.accessToken,sessionStorage.setItem("accessToken",s),e.next=20,g.a.get("http://localhost:5000/api/private",{headers:{Authorization:"Bearer ".concat(s)}});case 20:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("refreshToken"),e.prev=1,e.next=4,g.a.delete("http://localhost:5000/api/users/logout",{token:t});case 4:a=e.sent,sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),sessionStorage.removeItem("userId"),R(!0),console.log("\ub85c\uadf8\uc544\uc6c3 res : ",a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("\ub85c\uadf8\uc544\uc6c3 \uc5d0\ub7ec",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"moviedb"},!0===E?r.a.createElement(F,{login:E,setLogin:b,openRegister:function(){b(!1),O(!0)},setRegister:O,setChange:R}):null,!0===C?r.a.createElement(D,{setRegister:O,setLogin:b}):null,r.a.createElement("header",null,r.a.createElement("div",{className:"nav"},!0===B?r.a.createElement("span",{onClick:function(){b(!0)}},"Sign-In"):r.a.createElement("span",{onClick:K},"Log-Out"),r.a.createElement("span",{onClick:Y},"My Favorite List"))),r.a.createElement("div",{className:"page-title"},r.a.createElement("h1",{onClick:function(){s({title:"",results:[],selected:{}}),U.current.focus(),U.current.value=""}},"Movie Database")),!0===S?r.a.createElement(M,null):null,r.a.createElement(d,{handleInput:function(e){var t=e.target.value;s((function(e){return Object(u.a)({},e,{title:t})}))},search:function(e){"Enter"===e.key&&W()},handleButton:W,inputRef:U}),r.a.createElement(k,{results:a.results,openPopup:function(e){g.a.get(J+"&i="+e).then((function(e){var t=e.data;s((function(e){return Object(u.a)({},e,{selected:t})}))})),console.log(a.selected)},toggle:p,setToggle:v,setClick:q,isClick:z}),!0===p?r.a.createElement(w,{results:a.selected,closePopup:function(){s((function(e){return Object(u.a)({},e,{selected:{}})})),v(!1)},setClick:q,isClick:z}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(251);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.d226af68.chunk.js.map